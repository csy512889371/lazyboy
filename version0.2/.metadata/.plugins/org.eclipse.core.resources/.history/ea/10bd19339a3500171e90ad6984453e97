#include "debug.h"
#include "base.h"
#include "position.h"
#include "hash.h"
#include "move.h"
#include "movesort.h"
#include "search.h"
#include "ucci.h"
#include "time.h"
#include <string>
#include <cstdio>

const int DEBUG_ACCEPTED = 0;
const int DEBUG_TIME_NODE = 1;
const int DEBUG_MOVESORT_EVALUATE = 2;

struct DataStruct {
	std::string FenStr;
	std::string MoveStr;
	int MoveNum;
	int id;
	std::string name;
};

DataStruct Data[250];
int nData;

std::string GetString ( const char *inputS ) {
	std::string s = "";
	std::cout << inputS[0] << std::endl;
//	int i = 0;
//	while ( inputS[i] != ' ' ) {
//		i ++;
//	}
	return s;
}

void ReadData ( void ) {
	freopen ("/Users/peteryuanpan/Desktop/毕业设计/lazyboy-master/version0.2/data/data.txt", "r", stdin);
	nData = 0;
	while ( true ) {
		CommEnum Order = IdleLine ( Command, 0 );
		if ( Order == e_CommQuit ) {
			break;
		}
		else if ( Order == e_CommAnnotation ) {
			++ nData;
			std::string s = (std::string) Command.Annotation.String;
			s = s.erase ( 0, s.find(' ') + 1 );
			Data[nData].id = std::stoi( s.substr(0, s.find(' ')) );
			std::cout << Data[nData].id << std::endl;
			s = s.erase ( 0, s.find(' ') + 1 );
			Data[nData].name = s;
			std::cout << Data[nData].name << std::endl;
		}
		else if ( Order == e_CommPosition ) {
			Data[nData].FenStr = GetString ( Command.Position.FenStr );
			Data[nData].MoveStr = GetString ( Command.Position.MoveStr );
			Data[nData].MoveNum = Command.Position.MoveNum;
		}
	}
}

void DebugAccepted ( void ) {

}

void DebugTimeNode ( void ) {
	ReadData ();

}

void DebugMovesortEvaluate ( void ) {

}

void MainDebug ( void ) {
	int DEBUG_TYPE = 1; //
	switch ( DEBUG_TYPE ) {
		case DEBUG_ACCEPTED:
			DebugAccepted ();
			break;

		case DEBUG_TIME_NODE:
			DebugTimeNode ();
			break;

		case DEBUG_MOVESORT_EVALUATE:
			DebugMovesortEvaluate ();
			break;

		default:
			break;
	}
}
